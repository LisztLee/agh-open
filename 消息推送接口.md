[TOC]

# 爱关怀消息推送接口

## 请求共用参数

以下三步的通用参数

参数 | 必须 | 描述
----|------|----
corpId | 是  | 企业ID
expires | 是  | 请求过期时间。UNIX时间戳
nonce | 是  | 请求ID。用于请求去重。
signature | 是  | 该请求的签名


## 签名算法

参与签名的字段包括所有的GET请求参数，通常有corp_id(企业唯一标识)，expires(过期时间)，nonce(请求标识)。

对所有待签名参数按照字段名的ASCII 码从小到大排序(字典序)后，使用URL键值对的格式（即key1=value1&key2=value2…）拼接成字符串string 这里需要注意的是所有参数名均为小写字符对string作hash_hmac md5方式加密,字段名和字段值都采用原始值,不进行URL转义举例，$key表示爱关怀分配给企业的密钥(以php为例):```PHPsignature = hash_hmac('md5','corp_id=123&expires=1460334710166&nonce=64bitstring',$key);
```

## 消息推送

***GET*** /message/push/endpoint

接口地址由合作方提供，爱关怀在有消息需要推送给用户时，会发GET请求到该地址。

输入：GET参数

请见上面表格公用参数。

参数 | 必须 | 描述
----|------|----
toUser | 是  | 同步过来的UID
title | 是  | 消息标题
description | 是  | 消息内容
url | 是  | 点击后的跳转地址


返回：

```
{
	"errno": 0,
	"error": "error info"
}
```


如果对方处理成功，请确保 errno:0，如果出现错误，需返回任意数字错误号，并提供 error 错误描述。

